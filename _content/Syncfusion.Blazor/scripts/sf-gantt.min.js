(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"./bundles/sf-gantt.js":function(t,e,i){"use strict";i.r(e);i("./modules/sf-gantt.js")},"./modules/sf-gantt.js":function(t,e){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Gantt=function(){"use strict";var t=function(){function t(t,e,i,s){this.toolbarHeight=0,this.chartPreviousScroll={top:0,left:0},this.treegridPreviousScroll={top:0,left:0},this.spinnerShown=!1,this.isTaskbarEditingEventMapped=!1,this.scrollbarUpdate=!1,window.sfBlazor=window.sfBlazor,this.element=e,this.dotNetRef=s,this.isFromTreeGrid=!1,this.options=i,this.dataId=t,window.sfBlazor.setCompInstance(this)}return t.prototype.getOffsetRect=function(t){var e=t.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.clientTop||document.body.clientTop||0,o=document.documentElement.clientLeft||document.body.clientLeft||0,r=e.top+i-n,a=e.left+s-o;return{top:Math.round(r),left:Math.round(a),width:e.width,height:e.height}},t.prototype.getParentElement=function(t,e,i){for(var s=t;s&&!(i?s.id===e:s.classList.contains(e));)s=s.parentElement;return s},t}(),e="e-active-container",i=function(){function t(t,e,i,s){this.parent=t,this.chartElement=e.querySelector(".e-gantt-chart-pane"),this.element=e.querySelector(".e-chart-scroll-container"),this.timelineHeaderElement=e.querySelector(".e-timeline-header-container"),this.holidaySpanElement=e.querySelectorAll(".e-span"),this.addEventListeners(),this.ChartHeight(e),sf.base.isNullOrUndefined(this.holidaySpanElement)||this.UpdateHolidayLabel(s)}return t.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.element,"scroll",this.onScroll,this),sf.base.EventHandler.add(this.chartElement,"mousedown",this.mouseDownHandler,this)},t.prototype.removeEventListeners=function(){sf.base.EventHandler.remove(this.element,"scroll",this.onScroll),sf.base.EventHandler.remove(this.chartElement,"mousedown",this.mouseDownHandler)},t.prototype.gridScrollHandler=function(t){this.element.scrollTop=t,this.parent.isFromTreeGrid=!0},t.prototype.showHideSpinner=function(t){var e=this.parent;t&&!this.parent.spinnerShown?(this.parent.dotNetRef.invokeMethodAsync("ShowSpinner"),this.parent.spinnerShown=!0):!t&&this.parent.spinnerShown&&(e.dotNetRef.invokeMethodAsync("HideSpinner"),e.spinnerShown=!1)},t.prototype.onScroll=function(){var t=this.parent,e=this;t.scrollbarUpdate=!0,this.element.scrollTop!==t.chartPreviousScroll.top&&this.parent.options.enableVirtualization&&(this.showHideSpinner(!0),window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout((function(){e.showHideSpinner(!1)}),200)),this.element.scrollLeft!==this.parent.chartPreviousScroll.left&&(this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,this.parent.chartPreviousScroll.left=this.element.scrollLeft),this.element.scrollTop!==this.parent.chartPreviousScroll.top&&(this.parent.isFromTreeGrid||this.parent.treeGridModule.updateScrollTop(this.element.scrollTop),this.parent.chartPreviousScroll.top=this.element.scrollTop,this.parent.isFromTreeGrid=!1)},t.prototype.mouseDownHandler=function(t){if(null!=this.parent.getParentElement(t.target,"e-gantt-chart")){var e=null,i=null;this.parent.getParentElement(t.target,"e-timeline-header-container")?e="Header":this.parent.getParentElement(t.target,"e-content")&&(e="Content",i=this.parent.getParentElement(t.target,"e-chart-row-cell")?this.parent.getParentElement(t.target,"e-chart-row-cell").getAttribute("data-uid"):null),"Header"!=e&&"Content"!=e||this.parent.dotNetRef.invokeMethodAsync("ChartMouseDownHandler",e,i)}},t.prototype.setScrollLeft=function(t){this.element.scrollLeft=t,this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,this.parent.chartPreviousScroll.left=this.element.scrollLeft},t.prototype.setScrollTop=function(t){this.element.scrollTop=t,this.parent.treeGrid.element.querySelector(".e-content").scrollTop=t},t.prototype.ChartHeight=function(t){this.toolbarElement=t.querySelector("#"+t.id+"_Gantt_Toolbar"),this.viewPortHeight=this.parent.height-this.parent.toolbarHeight-this.timelineHeaderElement.offsetHeight,this.element.style.height="calc(100% - "+this.timelineHeaderElement.offsetHeight+"px)"},t.prototype.UpdateHolidayLabel=function(t){for(var e=this.holidaySpanElement.length,i=0;i<e;i++)this.holidaySpanElement[i].style.top=sf.base.formatUnit(this.viewPortHeight<t?t/2:this.viewPortHeight/2)},t.prototype.destroy=function(){this.removeEventListeners()},t}(),s=function(){function t(t,e){this.parent=t,this.content=e,this.addEventListeners()}return t.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.content,"scroll",this.scrollHandler,this),sf.base.EventHandler.add(window,"resize",this.windowResize,this)},t.prototype.removeEventListeners=function(){sf.base.EventHandler.remove(this.content,"scroll",this.scrollHandler),sf.base.EventHandler.remove(window,"resize",this.windowResize)},t.prototype.scrollHandler=function(t){this.content.scrollTop!==this.parent.treegridPreviousScroll.top&&this.parent.chartScrollModule.gridScrollHandler(this.content.scrollTop),this.parent.treegridPreviousScroll.top=this.content.scrollTop},t.prototype.windowResize=function(){sf.base.Browser.isDevice&&this.parent.dotNetRef.invokeMethodAsync("WindowResize")},t.prototype.updateScrollTop=function(t){this.content.scrollTop=t,this.parent.treegridPreviousScroll.top=this.content.scrollTop},t.prototype.destroy=function(){this.removeEventListeners()},t}(),n=function(){return(n=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},o=function(){function t(t){this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0,this.restrictTaskbarEdit=!1,this.parent=t,this.initPublicProp(),this.ganttChartTableBody=this.parent.element.querySelector("#"+this.parent.element.id+"_chartContentBody"),this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane"),this.chartBodyContainer=this.parent.element.querySelector(".e-chart-root-container"),this.addEventListeners()}return t.prototype.initPublicProp=function(){this.taskBarEditElement=null,this.taskBarEditRecord=null,this.taskBarEditAction=null,this.dragMouseLeave=!1,this.isMouseDragging=!1,this.isTaskbarHold=!1,this.connectorPointWidth=null,this.connectorSecondAction=null,this.toPredecessorText=null,this.highlightedSecondElement=null,this.falseLine=null},t.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseDown,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchCancelEvent,this.ganttMouseLeave,this),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp,this),sf.base.EventHandler.add(this.chartBodyContainer,"click",this.click,this)},t.prototype.removeEventListeners=function(){sf.base.EventHandler.remove(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseDown),sf.base.EventHandler.remove(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove),sf.base.EventHandler.remove(this.chartPane,sf.base.Browser.touchCancelEvent,this.ganttMouseLeave),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp),sf.base.EventHandler.remove(this.chartBodyContainer,"click",this.click)},t.prototype.ganttMouseDown=function(t){this.taskbarCanDrag=!1;var e=this.getElementByPosition(t);this.parent.getParentElement(e,"e-taskbar-main-container")==this.taskbarCurrentEditElement&&(this.taskbarCanDrag=!0),this.updateTaskBarEditElement(t)},t.prototype.click=function(t){var e=this.getElementByPosition(t);this.taskbarCurrentEditElement=this.parent.getParentElement(e,"e-taskbar-main-container")},t.prototype.ganttMouseLeave=function(t){this.dragMouseLeave=!0},t.prototype.ganttChartMouseUp=function(t){var e=this;this.isTaskbarHold=!1,this.taskBarEditAction&&this.isMouseDragging?this.dragMouseLeave?(this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",null,null,null),this.taskBarEditRecord=this.previousItem,this.updateItemPosition()):this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord).then((function(t){null!=e.taskBarEditRecord&&null!=t&&(e.taskBarEditRecord.left=t.left,e.taskBarEditRecord.width=t.width),e.updateItemPosition()})):this.taskBarEditElement?(this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",null,null,null),this.falseLine&&this.removeFalseLine(!0),this.initPublicProp()):this.tappedPoint&&(this.taskbarCurrentEditElement=null),this.stopScrollTimer()},t.prototype.updateItemPosition=function(){this.setItemPosition(),this.falseLine&&this.removeFalseLine(!0),this.initPublicProp()},t.prototype.updateTaskBarEditElement=function(t){var e=this,i=this.getElementByPosition(t),s=this.parent.getParentElement(i,"e-taskbar-main-container");if(this.taskBarEditElement=s,this.taskBarEditElement&&!this.tappedPoint)"mousedown"!==t.type&&"touchstart"!==t.type&&"click"!==t.type||(this.dataGuid=this.taskBarEditElement.getAttribute("rowuniqueid"),this.parent.dotNetRef.invokeMethodAsync("GetConnectorValues").then((function(t){e.connectorPointWidth=t})),this.taskBarEditAction=this.getTaskBarAction(t),this.parent.isTaskbarEditingEventMapped&&this.parent.dotNetRef.invokeMethodAsync("OnTaskbarEditing",this.dataGuid,this.taskBarEditAction).then((function(t){e.restrictTaskbarEdit=t})),this.parent.dotNetRef.invokeMethodAsync("GetEditedRecord",this.dataGuid,this.taskBarEditAction).then((function(i){e.taskBarEditRecord=i,e.updateMouseDownProperties(t)})),this.isTaskbarHold=!0);else if(this.taskBarEditElement&&this.tappedPoint){var n=s.getAttribute("rowuniqueid");this.parent.dotNetRef.invokeMethodAsync("RenderConnectorLine",this.tappedPoint,this.dataGuid,n),this.initPublicProp()}"touchstart"!==t.type&&"click"!==t.type||sf.base.isNullOrUndefined(this.chartBodyContainer.querySelector(".e-connector-line-container"))||(this.taskBarEditElement||this.tappedPoint?sf.base.addClass(this.chartBodyContainer.querySelectorAll(".e-connector-line-container"),"e-connector-line-z-index"):sf.base.removeClass(this.chartBodyContainer.querySelectorAll(".e-connector-line-container"),"e-connector-line-z-index"))},t.prototype.updateMouseDownProperties=function(t){var e=this.getCoordinate(t);if(e.pageX||e.pageY){var i=this.parent.getOffsetRect(this.chartBodyContainer);this.mouseDownX=e.pageX-i.left+this.parent.chartPreviousScroll.left,this.mouseDownY=e.pageY-i.top+this.parent.chartPreviousScroll.top}},t.prototype.getTaskBarAction=function(t){var e=this.getElementByPosition(t),i=(this.taskBarEditRecord,"");return e.classList.contains("e-taskbar-left-resizer")?i="LeftResizing":e.classList.contains("e-taskbar-right-resizer")?i="RightResizing":e.classList.contains("e-child-progress-resizer")||sf.base.closest(e,".e-child-progress-resizer")?i="ProgressResizing":e.classList.contains("e-connectorpoint-left-hover")?(i="ConnectorPointLeftDrag","touchstart"!==t.type&&"click"!==t.type||(this.tappedPoint="ConnectorPointLeftDrag")):e.classList.contains("e-connectorpoint-right-hover")?(i="ConnectorPointRightDrag","touchstart"!==t.type&&"click"!==t.type||(this.tappedPoint="ConnectorPointRightDrag")):"Auto"===this.parent.options.taskMode&&(sf.base.closest(e,".e-gantt-parent-taskbar")||sf.base.closest(e,".e-gantt-parent-milestone"))?i="ParentDrag":sf.base.closest(e,".e-gantt-child-taskbar")?i="ChildDrag":sf.base.closest(e,".e-gantt-milestone")&&(i="MilestoneDrag"),i},t.prototype.getElementByPosition=function(t){var e=this.getCoordinate(t);return e.pageX=null!=e.pageX?e.pageX:0,e.pageY=null!=e.pageY?e.pageY:0,document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset)},t.prototype.getCoordinate=function(t){var e={};if("touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchleave"===t.type){var i=t;e.pageX=i.changedTouches[0].pageX,e.pageY=i.changedTouches[0].pageY}else{i=t;e.pageX=i.pageX,e.pageY=i.pageY}return e},t.prototype.ganttMouseMove=function(t){if("touchmove"!==t.type&&"click"!==t.type||this.taskbarCanDrag){if(this.taskBarEditAction&&this.taskBarEditRecord&&this.isTaskbarHold){var e=this.parent.getOffsetRect(this.chartBodyContainer),i=this.getCoordinate(t);this.mouseMoveX=i.pageX-e.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=i.pageY-e.top+this.parent.chartPreviousScroll.top,this.dragMouseLeave=!1,this.isMouseDragCheck(),this.isMouseDragging&&this.taskBarEditingAction(t,!1)}var s=sf.base.closest(t.target,".e-taskbar-main-container");s&&(this.parent.options.allowTaskbarEditing&&"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction?s.style.cursor="move":s.style.cursor="auto"),sf.base.isNullOrUndefined(this.chartBodyContainer.querySelector(".e-connector-line-container"))||(null!==s?sf.base.addClass(this.chartBodyContainer.querySelectorAll(".e-connector-line-container"),"e-connector-line-z-index"):sf.base.isNullOrUndefined(this.chartBodyContainer.querySelectorAll(".e-connector-line-z-index"))||sf.base.removeClass(this.chartBodyContainer.querySelectorAll(".e-connector-line-container"),"e-connector-line-z-index"))}},t.prototype.isMouseDragCheck=function(){if(!this.isMouseDragging&&this.taskBarEditAction&&(this.mouseDownX!==this.mouseMoveX&&(this.mouseDownX+3<this.mouseMoveX||this.mouseDownX-3>this.mouseMoveX)||this.mouseDownY!==this.mouseMoveY&&(this.mouseDownY+3<this.mouseMoveY||this.mouseDownY-3>this.mouseMoveY))){this.isMouseDragging=!0;var t=this.taskBarEditRecord;this.previousItem=n({},t),this.taskBarEditElement.setAttribute("aria-grabbed","true")}},t.prototype.updateMouseMoveProperties=function(t){var e=this.parent.getOffsetRect(this.chartBodyContainer),i=this.getCoordinate(t),s="ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction;if((i.pageX||i.pageY)&&(this.mouseMoveX=i.pageX-e.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=i.pageY-e.top+this.parent.chartPreviousScroll.top),this.taskBarEditRecord.width>3&&("ProgressResizing"!==this.taskBarEditAction||0!==this.taskBarEditRecord.progress&&100!==this.taskBarEditRecord.progress)||s){var n=this.mouseMoveX-this.parent.chartPreviousScroll.left+e.left,o=this.mouseMoveY-this.parent.chartPreviousScroll.top+e.top;n+20>e.left+this.chartBodyContainer.offsetWidth?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):n-10<e.left?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("left")):s&&o>e.top+this.chartBodyContainer.offsetHeight-80?(this.timerCount=this.parent.chartPreviousScroll.top,this.startScrollTimer("bottom")):s&&o-25<e.top?(this.timerCount=this.parent.chartPreviousScroll.top,this.startScrollTimer("top")):null!=this.scrollTimer&&this.stopScrollTimer()}t.preventDefault()},t.prototype.startScrollTimer=function(t){var e=this;this.stopScrollTimer(),this.scrollTimer=window.setInterval((function(){e.timerCount="right"===t?e.timerCount+1>=e.parent.totalTimelineWidth?e.parent.totalTimelineWidth:e.timerCount+1:"bottom"===t?e.timerCount+1>=parseFloat(e.parent.element.querySelector(".e-chart-rows-container").style.height)?parseFloat(e.parent.element.querySelector(".e-chart-rows-container").style.height):e.timerCount+1:e.timerCount-1<0?0:e.timerCount-1,"bottom"===t||"top"===t?e.parent.chartScrollModule.setScrollTop(e.timerCount):e.parent.chartScrollModule.setScrollLeft(e.timerCount),"ConnectorPointLeftDrag"!==e.taskBarEditAction&&"ConnectorPointRightDrag"!==e.taskBarEditAction||e.drawFalseLine()}),0)},t.prototype.stopScrollTimer=function(){window.clearInterval(this.scrollTimer),this.scrollTimer=null},t.prototype.taskBarEditingAction=function(t,e){this.restrictTaskbarEdit||this.updateMouseMoveProperties(t),"ProgressResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"LeftResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"RightResizing"!==this.taskBarEditAction&&"ParentResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"ParentDrag"!==this.taskBarEditAction&&"ChildDrag"!==this.taskBarEditAction&&"MilestoneDrag"!==this.taskBarEditAction||this.restrictTaskbarEdit?"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||"touchmove"==t.type||this.restrictTaskbarEdit||(this.updateConnectorLineSecondProperties(t),this.triggerDependencyEvent(t),this.drawFalseLine()):this.enableDragging(t):this.enableRightResizing(t):this.enableLeftResizing(t):this.performProgressResize(t),this.restrictTaskbarEdit||this.setItemPosition(),"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction&&this.parent.dotNetRef.invokeMethodAsync("UpdateResizingData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord),this.updateTooltip(t)},t.prototype.updateTooltip=function(t){var e=document.getElementById(this.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(e)){var i=this.taskBarEditRecord,s=i.width,n=i.progressWidth,o=this.parent.getOffsetRect(this.taskBarEditElement),r=this.parent.tooltipModule.getPointerPosition(t),a=sf.base.select(".e-arrow-tip",e),l=a.offsetWidth/2+(e.offsetWidth-e.clientWidth);if(a.style.left="2px","ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction)return;"LeftResizing"===this.taskBarEditAction?e.style.left=o.left-l+"px":"RightResizing"===this.taskBarEditAction||"ParentResizing"===this.taskBarEditAction?e.style.left=o.left+s-l+"px":"ProgressResizing"===this.taskBarEditAction?e.style.left=o.left+n-l+"px":e.style.left=r.x-l+"px"}},t.prototype.setItemPosition=function(){var t=this.taskBarEditRecord;if(null!=t&&null!=this.taskBarEditElement){var e="MilestoneDrag"===this.taskBarEditAction||t.isMilestone?this.milestoneHeight:t.width,i=e-10,s=e-2,n=t.progress/100*t.width,o=this.taskBarEditElement.classList.contains("e-taskbar-main-container")?this.taskBarEditElement:sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-taskbar-main-container"),r=sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-left-label-container"),a=sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-right-label-container"),l=this.taskBarEditElement.querySelector(".e-gantt-child-progressbar"),h=this.taskBarEditElement.querySelector(".e-gantt-child-taskbar"),c=this.taskBarEditElement.querySelector(".e-child-progress-resizer"),d=this.taskBarEditElement.querySelector(".e-taskbar-right-resizer"),u=this.taskBarEditElement.querySelector(".e-gantt-parent-taskbar"),f=this.taskBarEditElement.querySelector(".e-gantt-parent-progressbar"),p=this.taskBarEditElement.querySelector(".e-right-connectorpoint-outer-div");this.parent.biggerMode&&(i=e-24,s=e+10),"ParentResizing"!==this.taskBarEditAction&&(o.style.width=e+"px",o.style.left=t.left+"px",r.style.width=t.left+"px",sf.base.isNullOrUndefined(a)||(a.style.left=t.left+e+"px")),p&&(p.style.left=s+"px"),d&&(d.style.left=i+"px"),"MilestoneDrag"===this.taskBarEditAction||t.isMilestone?(o.style.left=t.left-e/2+"px",r.style.width=t.left-e/2+"px",sf.base.isNullOrUndefined(a)||(a.style.left=t.left+e/2+"px")):"ProgressResizing"===this.taskBarEditAction?(h.style.left=t.left+t.progressWidth-10+"px",sf.base.isNullOrUndefined(l)||(l.style.width=t.progressWidth+"px",l.style.borderBottomRightRadius=this.progressBorderRadius+"px",l.style.borderTopRightRadius=this.progressBorderRadius+"px",c.style.left=t.progressWidth-8+"px")):"RightResizing"===this.taskBarEditAction?(h.style.width=e+"px",sf.base.isNullOrUndefined(l)||(l.style.width=n+"px",d.style.left=i+"px",c.style.left=n-5+"px")):"ParentDrag"===this.taskBarEditAction?(sf.base.isNullOrUndefined(u)||(u.style.width=e+"px"),sf.base.isNullOrUndefined(l)||(f.style.width=t.progressWidth+"px")):(sf.base.isNullOrUndefined(h)||(h.style.width=e+"px"),sf.base.isNullOrUndefined(l)||(d.style.left=i+"px",l.style.width=n+"px",c.style.left=n-5+"px"))}},t.prototype.enableLeftResizing=function(t){var e=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX<e.left+e.width?(i=this.mouseDownX-this.mouseMoveX,e.left>0&&(e.left=this.previousItem.left-i,e.width=this.previousItem.width+i)):this.mouseMoveX>e.left+e.width&&(i=this.mouseDownX-this.mouseMoveX,e.left=this.previousItem.left-i,e.width=3):this.mouseMoveX<e.left+e.width?(i=this.mouseMoveX-this.mouseDownX,e.left<e.left+e.width&&this.previousItem.left+i<=this.previousItem.left+this.previousItem.width&&(e.left=this.previousItem.left+i,e.width=this.previousItem.width-i)):(i=this.mouseMoveX-this.mouseDownX,e.left=this.previousItem.left+i,e.width=3),this.updateEditPosition(t,e),e.left=this.previousItem.left+this.previousItem.width-e.width},t.prototype.enableRightResizing=function(t){var e=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>e.left&&this.mouseDownX-this.mouseMoveX>3?(i=this.mouseDownX-this.mouseMoveX,e.width=this.previousItem.width-i):this.mouseMoveX<e.left&&(e.width=3):this.mouseMoveX>e.left&&(i=this.mouseMoveX-this.mouseDownX,e.width=this.previousItem.width+i),this.updateEditPosition(t,e)},t.prototype.enableDragging=function(t){var e=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?(i=this.mouseDownX-this.mouseMoveX)>0&&(e.left=this.previousItem.left-i):(i=this.mouseMoveX-this.mouseDownX,e.left=this.previousItem.left+i);var s=e.left<0?0:e.left+e.width>=this.parent.totalTimelineWidth?this.parent.totalTimelineWidth-e.width:e.left;e.left=s},t.prototype.performProgressResize=function(t){var e=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>e.left&&this.mouseMoveX<e.left+e.width&&e.left>0?(i=this.mouseMoveX-e.left,e.progressWidth=i):this.mouseMoveX>=e.left+e.width?e.progressWidth=e.width:e.progressWidth=0:this.mouseMoveX>e.left&&this.mouseMoveX<e.left+e.width?(i=this.mouseMoveX-e.left,e.progressWidth=i):this.mouseMoveX<=e.left?e.progressWidth=0:e.progressWidth=e.width;var s=e.progressWidth>e.width?e.width:e.progressWidth;s=e.progressWidth<0?0:e.progressWidth,e.progressWidth=s;var n=e.width-e.progressWidth;this.progressBorderRadius=n<=4?4-n:0},t.prototype.updateEditPosition=function(t,e){this.updateIsMilestone(e)},t.prototype.updateIsMilestone=function(t){t.width<=3?(t.width=3,t.isMilestone=!0):t.isMilestone=!1},t.prototype.updateConnectorLineSecondProperties=function(t){var e=this.getElementByPosition(t),i=this.parent.getParentElement(e,"e-taskbar-main-container");this.connectorSecondAction=null;this.parent.getParentElement(e,"e-connectorpoint-left")?(this.connectorSecondAction="ConnectorPointLeftDrag",this.toPredecessorText="Start"):this.parent.getParentElement(e,"e-connectorpoint-right")?(this.connectorSecondAction="ConnectorPointRightDrag",this.toPredecessorText="Finish"):(this.connectorSecondAction=null,this.toPredecessorText=null),this.taskBarEditElement!==i&&this.taskBarEditElement!==this.highlightedSecondElement&&(this.elementOffsetLeft=this.taskBarEditElement.offsetLeft,this.elementOffsetTop=this.taskBarEditElement.offsetTop+0,this.elementOffsetWidth=this.taskBarEditElement.offsetWidth,this.elementOffsetHeight=this.taskBarEditElement.offsetHeight,this.showHideTaskBarEditingElements(i,this.highlightedSecondElement)),sf.base.isNullOrUndefined(this.connectorSecondAction)&&!sf.base.isNullOrUndefined(this.connectorSecondElement)&&(this.connectorSecondElement.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-allow-block"),this.connectorSecondElement.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-allow-block")),this.connectorSecondElement=this.connectorSecondAction?i:null,this.toDataGuid=sf.base.isNullOrUndefined(this.connectorSecondElement)?null:this.connectorSecondElement.getAttribute("rowuniqueid")},t.prototype.showHideTaskBarEditingElements=function(t,e){if((e=e||this.taskBarEditElement)&&t!==e&&(e.querySelector(".e-taskbar-left-resizer")&&(e.querySelector(".e-taskbar-left-resizer").classList.remove("e-left-resize-gripper"),e.querySelector(".e-taskbar-right-resizer").classList.remove("e-right-resize-gripper"),e.querySelector(".e-child-progress-resizer")&&e.querySelector(".e-child-progress-resizer").classList.remove("e-progress-resize-gripper")),e.querySelector(".e-connectorpoint-left")||e.parentElement.querySelector(".e-connectorpoint-left"))){var i=sf.base.isNullOrUndefined(e.querySelector(".e-connectorpoint-left"))?e.parentElement:e;i.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-left-hover"),i.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-right-hover")}},t.prototype.triggerDependencyEvent=function(t,e){var i=this;this.parent.dotNetRef.invokeMethodAsync("DrawConnectorLine",this.taskBarEditAction,this.connectorSecondAction,this.toDataGuid).then((function(e){if(e){var s=document.getElementById(i.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(s)){var n=i.parent.tooltipModule.getPointerPosition(t),o=sf.base.select(".e-arrow-tip",s).offsetWidth/2+(s.offsetWidth-s.clientWidth);s.style.left=n.x-o+"px",s.style.visibility="visible"}}else{var r=i.getElementByPosition(t);(r.classList.contains("e-connectorpoint-left")||r.classList.contains("e-connectorpoint-right"))&&r.classList.add("e-connectorpoint-allow-block")}}))},t.prototype.drawFalseLine=function(){var t,e=this.mouseDownX,i=this.mouseDownY,s=this.mouseMoveX,n=this.mouseMoveY,o=Math.sqrt((e-s)*(e-s)+(i-n)*(i-n)),r="rotate("+180*Math.atan2(n-i,s-e)/Math.PI+"deg)";"ConnectorPointLeftDrag"===this.taskBarEditAction&&(t=this.elementOffsetLeft-this.connectorPointWidth/2-this.parent.chartPreviousScroll.left),"ConnectorPointRightDrag"===this.taskBarEditAction&&(t=this.elementOffsetLeft+this.elementOffsetWidth+this.connectorPointWidth/2-this.parent.chartPreviousScroll.left);var a=this.elementOffsetTop+this.elementOffsetHeight/2+this.chartBodyContainer.offsetTop-this.parent.chartPreviousScroll.top;this.removeFalseLine(!1),this.falseLine=document.createElement("div"),this.falseLine.className="e-gantt-false-line",this.falseLine.id="ganttfalseline"+this.parent.element.id,this.falseLine.style.transformOrigin="0% 100%",this.falseLine.style.right="auto",this.falseLine.style.position="absolute",this.falseLine.style.transform=r,this.falseLine.style.borderTopWidth="1px",this.falseLine.style.borderTopStyle="dashed",this.falseLine.style.zIndex="5",this.falseLine.style.width=o-3+"px",this.falseLine.style.left=t+"px",this.falseLine.style.top=a+"px",this.chartBodyContainer.appendChild(this.falseLine)},t.prototype.removeFalseLine=function(t){this.falseLine&&(sf.base.remove(this.falseLine),this.falseLine=null,t&&(this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0,sf.base.isNullOrUndefined(this.chartBodyContainer.querySelector(".e-connector-line-container"))||sf.base.removeClass(this.chartBodyContainer.querySelectorAll(".e-connector-line-container"),"e-connector-line-z-index")))},t.prototype.destroy=function(){this.stopScrollTimer(),this.removeEventListeners()},t}(),r=function(){function t(t){this.parent=t}return t.prototype.taskbarFocus=function(t){var i=t.querySelector(".e-gantt-child-taskbar"),s=t.querySelector(".e-gantt-parent-taskbar");return i?(i.focus(),t.querySelector(".e-taskbar-main-container").querySelector(".e-gantt-child-taskbar").classList.add(e)):(s.focus(),t.querySelector(".e-taskbar-main-container").querySelector(".e-gantt-parent-taskbar").classList.add(e)),"isNextTaskbar"},t.prototype.RightLabelFocus=function(t){var i=t.querySelector(".e-right-label-container");return i.focus(),i.querySelector(".e-label").classList.add(e),"isNextRightLabel"},t.prototype.LeftLabelFocus=function(t){var i=t.querySelector(".e-left-label-container");return i.focus(),i.querySelector(".e-label").classList.add(e),"isNextLeftLabel"},t}(),a=function(){function t(t){this.parent=t,this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane"),this.addEventListeners()}return t.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseMove,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this)},t.prototype.removeEventListeners=function(){sf.base.EventHandler.remove(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseMove),sf.base.EventHandler.remove(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove)},t.prototype.ganttMouseMove=function(t){this.tooltipMouseEvent=t},t.prototype.tooltipOpened=function(t){var e=document.getElementById(t.element.id);if(!sf.base.isNullOrUndefined(this.tooltipMouseEvent)){var i=this.getPointerPosition(this.tooltipMouseEvent),s=this.parent.getOffsetRect(this.chartPane),n=s.top+this.chartPane.offsetHeight,o=s.left+this.chartPane.offsetWidth,r=i.x,a=i.y;if(o<r+e.offsetWidth+10)for(;o<r+e.offsetWidth+10;)r=o-e.offsetWidth-10,e.style.left=r+"px";else r+=10,e.style.left=r+"px";window.innerHeight<e.offsetHeight+a&&(a=a-e.offsetHeight-10),n<a+e.offsetHeight+20?a=a-e.offsetHeight-10:a+=10,e.style.top=a+"px",e.style.visibility="visible"}},t.prototype.predecessorTooltipOpened=function(t){var e=document.getElementById(t.element.id);if(!sf.base.isNullOrUndefined(this.tooltipMouseEvent)){var i=this.getPointerPosition(this.tooltipMouseEvent),s=this.parent.getOffsetRect(this.chartPane),n=s.top+this.chartPane.offsetHeight,o=s.left+this.chartPane.offsetWidth,r=i.x,a=i.y;if(o<r+e.offsetWidth+10)for(;o<r+e.offsetWidth+10;)r=o-e.offsetWidth-10,e.style.left=r+"px";else r=r,e.style.left=r+"px";if(window.innerHeight<e.offsetHeight+a&&(a=a-e.offsetHeight-10),n<a+e.offsetHeight+20?a=a-e.offsetHeight-10:a+=10,document.getElementsByClassName("e-arrow-tip e-tip-bottom").length>0)document.getElementsByClassName("e-arrow-tip e-tip-bottom")[0].style.left=i.x-e.offsetLeft+"px";e.style.visibility="visible"}},t.prototype.getPointerPosition=function(t){var e,i;return sf.base.isNullOrUndefined(sf.base.getValue("pageX",t))&&sf.base.isNullOrUndefined(sf.base.getValue("pageY",t))?sf.base.isNullOrUndefined(sf.base.getValue("touches[0].pageX",t))&&sf.base.isNullOrUndefined(sf.base.getValue("touches[0].pageY",t))?sf.base.isNullOrUndefined(sf.base.getValue("clientX",t))&&sf.base.isNullOrUndefined(sf.base.getValue("clientY",t))||(e=sf.base.getValue("clientX",t)+document.body.scrollLeft+document.documentElement.scrollLeft,i=sf.base.getValue("clientY",t)+document.body.scrollTop+document.documentElement.scrollTop):(e=sf.base.getValue("touches[0].pageX",t),i=sf.base.getValue("touches[0].pageY",t)):(e=sf.base.getValue("pageX",t),i=sf.base.getValue("pageY",t)),{x:e,y:i}},t.prototype.destroy=function(){this.removeEventListeners()},t}();return{initialize:function(e,i,s,n){var o=new t(e,i,s,n);this.dotnetRef=n;var r={};return this.instance=window.sfBlazor.getCompInstance(e),o.height=r.height=i.offsetHeight,o.width=r.width=i.offsetWidth,o.toolbarElement=i.querySelector("#"+i.id+"_Gantt_Toolbar"),sf.base.isNullOrUndefined(o.toolbarElement)||(o.toolbarHeight=r.toolbarHeight=o.toolbarElement.offsetHeight),document.body.classList.contains("e-bigger")&&(o.biggerMode=r.biggerMode=!0),r},refreshGantt:function(t){var e=window.sfBlazor.getCompInstance(t);return document.body.classList.contains("e-bigger")?e.biggerMode=!0:e.biggerMode=!1,e.biggerMode},updatesplitterHeight:function(t){var e=window.sfBlazor.getCompInstance(t);e.element.querySelector("#"+e.element.id+"_Gantt_Splitter").style.height="calc(100% - "+e.toolbarHeight+"px)"},adjustTable:function(t){if(this.instance.options.enableVirtualization){var e=document.getElementById("treeGrid"+this.instance.element.id+"_gridcontrol").querySelector(".e-gridcontent").querySelector(".e-virtualtable"),i=document.getElementById(this.instance.element.id+"_chart").querySelector(".e-virtualtable");sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(i)||(""==i.style.transform?i.style.transform=e.style.transform:i.style.transform=i.style.transform.split(",")[0].trim()+","+e.style.transform.split(",")[1].trim())}},setChartHeight:function(t){var e=window.sfBlazor.getCompInstance(t),i=document.getElementById("treeGrid"+e.element.id+"_gridcontrol").querySelector(".e-gridcontent").querySelector(".e-virtualtrack"),s=document.getElementById("treeGrid"+e.element.id+"_gridcontrol");if(sf.base.isNullOrUndefined(i)&&(i=document.getElementById("treeGrid"+e.element.id+"_gridcontrol_content_table")),i&&i.clientHeight){var n=i.clientHeight+1+"px",o=document.getElementById(e.element.id+"_chart"),r=o.getElementsByClassName("e-chart-rows-container")[0],a=s.querySelectorAll(".e-content")[0].clientHeight,l=o.getElementsByClassName("e-nonworking-day-container")[0],h=o.querySelector("#"+e.element.id+"line-container");void 0===l&&null==l&&(l=null),void 0!==h&&null!=h&&(h.style.height=n),a<i.clientHeight?(r.style.height=n,this.viewPortHeight=i.clientHeight,null!=l&&(l.style.height=n)):(r.style.height=a-1+"px",this.viewPortHeight=a,null!=l&&(l.style.height=a-1+"px"))}return this.instance.scrollbarUpdate||this.instance.chartScrollModule.showHideSpinner(!1),this.adjustTable(e.element),this.viewPortHeight},treegridHeaderAlign:function(t,e){if(e){sf.base.addClass(this.instance.treeGridElement.querySelectorAll(".e-headercell"),"e-timeline-single-header-outer-div"),sf.base.addClass(this.instance.treeGridElement.querySelectorAll(".e-columnheader"),"e-timeline-single-header-outer-div");var i=this.instance.element.querySelector(".e-gridheader").offsetHeight;this.instance.element.querySelector(".e-gridcontent").style.height="calc(100% - "+i+"px)"}else sf.base.removeClass(this.instance.treeGridElement.querySelectorAll(".e-headercell"),"e-timeline-single-header-outer-div"),sf.base.removeClass(this.instance.treeGridElement.querySelectorAll(".e-columnheader"),"e-timeline-single-header-outer-div")},getTreeGrid:function(t,e){var i=window.sfBlazor.getCompInstance(t);this.hideTreeGridScrollBar(i),sf.base.isNullOrUndefined(this.instance.treeGridElement)||(this.instance.treeGrid=this.instance.treeGridElement.blazor_instance),this.instance.scrollbarUpdate||this.instance.chartScrollModule.showHideSpinner(!0),this.treegridHeaderAlign(this.instance.element,e),this.adjustTable(this.instance.element)},hideTreeGridScrollBar:function(t){this.instance.treeGridElement=this.instance.element.querySelector("#treeGrid"+this.instance.element.id);var e=this.instance.treeGridElement.querySelector(".e-content");e&&(e.style.height="100%",this.instance.element.querySelector(".e-gridcontent").style.height="calc(100% - "+this.instance.element.querySelector(".e-gridheader").offsetHeight+"px)",this.instance.treeGridModule=new s(this.instance,e));var i=this.getScrollbarWidth(this.instance.element);0!==i?e.style.cssText+="width: calc(100% + "+(i+1)+"px);":e.classList.add("e-gantt-scroll-padding")},getScrollbarWidth:function(t){var e=t,i=document.createElement("div");i.style.visibility="hidden",i.style.overflow="scroll",i.style.msOverflowStyle="scrollbar";var s=document.createElement("div");i.appendChild(s),e.appendChild(i);var n=i.offsetWidth-s.offsetWidth;return i.parentNode.removeChild(i),n},getOffsetLeft:function(t){var e=this.instance.element.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.clientLeft||document.body.clientLeft||0,n=e.left+i-s;return Math.round(n)},tooltipOpened:function(t,e){this.instance.tooltipModule.tooltipOpened(e)},predecessorTooltipOpened:function(t,e){this.instance.tooltipModule.predecessorTooltipOpened(e)},setTooltipVisibility:function(){var t=document.getElementById(this.instance.element.id+"_editingtooltip_content");sf.base.isNullOrUndefined(t)||(t.style.visibility="visible")},ChartInitialize:function(t,e,s,n,r){this.instance.totalTimelineWidth=s,this.instance.isTaskbarEditingEventMapped=r;var l=this.instance.element.offsetHeight;return this.instance.options.allowTaskbarEditing&&(this.instance.taskbarEditModule=new o(this.instance),this.instance.taskbarEditModule.milestoneHeight=n),this.instance.tooltipModule=new a(this.instance),this.instance.chartScrollModule=new i(this.instance,this.instance.element,l,e),this.instance.spinnerShown=!1,{viewPortHeight:this.instance.chartScrollModule.viewPortHeight,chartWidth:this.instance.element.querySelector(".e-gantt-chart-pane").offsetWidth}},UpdateScroll:function(t,e){this.scrollBarElement=this.instance.element.querySelector(".e-chart-scroll-container"),(this.scrollBarElement.offsetWidth<e||this.scrollBarElement.scrollLeft>e)&&(this.scrollBarElement.scrollLeft=e)},chartFocusOutHandler:function(t,i){this.instance.keyboardModule=new r(this.instance);var s=this.instance.element.querySelector(".e-chart-row-cell[data-uid="+t+"]"),n=s.querySelector("."+e)?s.querySelector("."+e).parentElement:null;n&&(n.querySelector(".e-label").classList.remove(e),n.blur())},focusOutHandler:function(t){sf.base.isNullOrUndefined(t.classList)||t.classList.remove(e)},resetPrivateProperties:function(t){this.instance.taskbarEditModule.tappedPoint=null},tabFocusHandler:function(t,i,s){this.instance.keyboardModule=new r(this.instance);var n=this.instance.element.querySelector(".e-chart-row-cell[data-uid="+t+"]"),o=n.querySelector("."+e)?n.querySelector("."+e).parentElement:null;if(o)return o.classList.contains("e-left-label-inner-div")?s?(o.querySelector(".e-label").classList.remove(e),o.blur(),"isNextGrid"):this.instance.keyboardModule.taskbarFocus(n):o.classList.length?o.classList.contains("e-right-label-inner-div")?s?this.instance.keyboardModule.taskbarFocus(n):"isNextGrid":"":s?n.querySelector(".e-left-label-inner-div")?this.instance.keyboardModule.LeftLabelFocus(n):"isNextGrid":n.querySelector(".e-right-label-inner-div")?this.instance.keyboardModule.RightLabelFocus(n):"isNextGrid";return!s&&n.querySelector(".e-left-label-inner-div")?this.instance.keyboardModule.LeftLabelFocus(n):s&&n.querySelector(".e-right-label-inner-div")?this.instance.keyboardModule.RightLabelFocus(n):this.instance.keyboardModule.taskbarFocus(n)},getChartWidth:function(t){return this.instance.element.querySelector(".e-gantt-chart-pane").clientWidth},updateScrollLeft:function(t,e,i){var s=this.instance.element.querySelector(".e-chart-scroll-container");if(null!=i){var n=this.instance.element.querySelector(".e-row").offsetHeight,o=i*n;(s.offsetHeight-n/2+s.scrollTop<o||s.scrollTop>o)&&(s.scrollTop=o)}e=e>0?e:0,e=s.scrollWidth<=e?s.scrollWidth:e,(s.offsetWidth+s.scrollLeft<e||s.scrollLeft>e)&&(s.scrollLeft=e-50)}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js`).then(()=>{sfBlazor.loadDependencies('sfgantt');})})();